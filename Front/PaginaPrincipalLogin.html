<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EyesEverywhere</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://unpkg.com/@phosphor-icons/web"></script>

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      color: #000000;
      background-color: #d4edda;
      transition: background-color 0.3s, color 0.3s;
    }

    .main-content {
      margin-left: 70px; /* mesma largura da sidebar */
      padding: 0px;
      transition: margin 0.3s ease;
    }

    @media (max-width: 768px) {
      .main-content {
        margin-left: 0; /* para dispositivos móveis, onde a barra está embaixo */
        margin-bottom: 60px; /* evita que o conteúdo fique coberto pela sidebar inferior */
      }
    }

    body.dark-mode {
      background-color: #121212;
      color: #e0e0e0;
    }

    .dark-mode .card,
    .dark-mode .p-4.bg-white,
    .dark-mode .form-control {
      background-color: #1e1e1e !important;
      color: #fff;
    }

    .dark-mode .lead{
      color: #000000 !important;
    }

    .dark-mode .lead1{
      color: #ffffff !important;
    }

    .dark-mode .navbar,
    .dark-mode .footer {
      background-color: #1b1b1b !important;
    }

    .navbar-brand img {
      width: 40px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .hero-carousel img {
      height: 500px;
      object-fit: cover;
      filter: brightness(70%);
    }

    .carousel-caption {
      position: absolute;
      top: 57%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(111, 111, 111, 0.639);
      padding: 20px;
      border-radius: 0px;
      text-align: center;
      max-width: 100vw;
      min-width: 280px;
    }

    .carousel-caption h1 {
      font-size: 2.5rem;
      font-weight: bold;
      color: white;
    }

    .carousel-caption p {
      font-size: 1.2rem;
      color: white;
    }

    @media (max-width: 768px) {
      .carousel-caption h1 {
        font-size: 1.8rem;
      }

      .carousel-caption p {
        font-size: 1rem;
      }
    }

    .card1 img {
      height: 200px;
      object-fit: contain;
      background-color: #f8f9fa; /* opcional, ajuda a ver a imagem toda */
      border: 1px solid #dee2e6;
    }

    .card img {
      height: 200px;
      object-fit: cover;
    }


    .section-title {
      color: #28a745;
      font-weight: bold;
    }

    .footer {
      background: #28a745;
      color: white;
      padding: 40px 0;
      transition: background-color 0.3s;
    }

    .footer a {
      color: white;
      text-decoration: none;
    }

    .counter {
      font-size: 3rem;
      font-weight: bold;
      color: #28a745;
    }

    .bg-light-green {
      background-color: #d4edda;
    }

    .card:hover,
    .p-4.bg-white:hover {
      transform: scale(1.05);
      box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.1);
    }

    .card,
    .p-4.bg-white {
      transition: all 0.3s ease-in-out;
    }

    .card1:hover,
    .p-4.bg-white:hover {
      transform: scale(1.05);
      box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.1);
    }

    .card1,
    .p-4.bg-white {
      transition: all 0.3s ease-in-out;
    }
    .suggestion-form input,
    .suggestion-form textarea {
      margin-bottom: 10px;
    }

    #scrollTopBtn {
      display: none;
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 1000;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 50%;
      padding: 10px 15px;
      font-size: 20px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      cursor: pointer;
    }
    
    #darkModeToggle {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1051; /* garantir que está acima do menu */
    }

    @media (max-width: 1580px) {
        #darkModeToggle {
            top: 70px;
            right: 10px;
        }
    }

    .notification {
      position: fixed;
      bottom: 80px;
      right: 30px;
      background-color: #28a745;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      display: none;
      z-index: 1050;
    }
    .dark-mode ::placeholder {
      color: #ccc !important;
      opacity: 1;
    }
    .dark-mode .sobre {
        color: #000000 !important;
    }
    .dark-mode .modal-body{
        color: #000000 !important;
    }
    .dark-mode .modal-title{
        color: #000000 !important;
    }
    .dark-mode a.nav-link,
    .dark-mode .navbar-brand {
      color: #f0f0f0 !important;
    }

    .sidebar {
      position: fixed; /* ou absolute, se preferir */
      z-index: 1100; /* maior que o da navbar (que é 1050 no Bootstrap) */
      top: 0;
      left: 0;
      width: 80px; /* ou o tamanho que quiser */
      height: 100vh;
      align-items: center;
      padding: 20px 10px;
      display: flex;
      flex-direction: column;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
      background-color: #f8f9fa; /* ou o que você quiser */
    }
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        bottom: 0;
        top: auto;
        left: 0;
        width: 100%;
        height: 60px;
        flex-direction: row;
        justify-content: space-around;
        padding: 10px 0;
        box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);
      }

      .sidebar .icon {
        margin: 0;
      }

      .user-menu {
        position: static;
      }

      .mini-menu {
        position: absolute;
        bottom: 60px;
        top: auto;
        left: 50%;
        transform: translateX(-50%);
      }

      .user-menu:hover .mini-menu {
        display: block;
      }
    }

    .sidebar .icon {
            font-size: 24px;
            color: #6c757d;
            margin: 15px 0;
            cursor: pointer;
            padding: 10px;
            border-radius: 10px;
            transition: background 0.3s ease;
        }
        .icon-link {
            text-decoration: none; /* Remove o sublinhado */
            color: inherit; /* Mantém a cor herdada */
        }
        .sidebar .icon:hover, .sidebar .active {
            background: #d4edda;
            color: #28a745;
        }
        /* Mini menu */
        .user-menu {
            position: relative;
        }

        .mini-menu {
            display: none;
            position: absolute;
            top: 50px;
            left: 0;
            background: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            padding: 10px;
            z-index: 1000;
            width: 150px;
        }

        .mini-menu a {
            display: block;
            padding: 8px 10px;
            text-decoration: none;
            color: #6c757d;
            font-size: 14px;
            border-radius: 5px;
            transition: background 0.3s ease;
        }

        .mini-menu a:hover {
            background: #d4edda;
            color: #28a745;
        }

        .user-menu:hover .mini-menu {
            display: block;
        }

        .vibrate {
          animation: vibrar 0.5s infinite;
        }
        @keyframes vibrar {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-2px); }
          50% { transform: translateX(2px); }
          75% { transform: translateX(-1px); }
        }

        #chatBody p {
          margin: 5px 0;
        }
        #chatBody p strong {
          color: #28a745;
        }



  </style>

</head>

<body>
  <!-- Barra lateral -->
<div class="main-content">
<div class="sidebar">
  <a href="PaginaPrincipalLogin.html" class="icon-link"><i class="ph-bold ph-house icon active"></i></a>
  <a href="tabela+mapa_teste.html" class="icon-link"><i class="ph-bold ph-map-trifold icon"></i></a>
  <a href="registoocorrencia.html" class="icon-link"><i class="ph-bold ph-scroll icon"></i></a>
  <a href="tabela.html" class="icon-link"><i class="ph-bold ph-table icon"></i></a>
  <div class="icon-link user-menu">
      <i class="ph-bold ph-user-circle icon"></i>
      <div class="mini-menu">
          <a href="alterar.html">Ver Perfil</a>
          <a href="configuracoes.html">Configurações</a>
          <a href="PaginaPrincipal.html">Sair</a>
      </div>
  </div>
</div>

    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center">
                <img src="imagens/logp.jpg" alt="Logo"> EyesEverywhere
            </a>
            <!-- Botão Dark Mode -->
            <button id="darkModeToggle" class="btn btn-outline-success btn-sm">
              <i class="fas fa-moon"></i>
            </button>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top">
      <div class="container">
          <a class="navbar-brand d-flex align-items-center">
              <img src="imagens/Logo.png" alt="Logo"> EyesEverywhere
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
              <span class="navbar-toggler-icon"></span>
          </button>
      </div>
  </nav>

  <header>
      <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner hero-carousel">
              <div class="carousel-item active">
                  <img src="imagens/city.jpg" class="d-block w-100" alt="...">
                  <div class="carousel-caption d-block">
                      <h1>EyesEverywhere</h1>
                      <p>Plataforma de Higiene e Segurança Urbana</p>
                      <a href="#areas" class="btn btn-success">Saber Mais</a>
                  </div>
              </div>
              <div class="carousel-item">
                  <img src="imagens/limpeza.jpg" class="d-block w-100" alt="...">
                  <div class="carousel-caption d-block">
                      <h1>Limpeza Inteligente</h1>
                      <p>Automatização de processos para manutenção contínua.</p>
                      <a href="#sobre" class="btn btn-success">Saber Mais</a>
                  </div>
              </div>
              <div class="carousel-item">
                  <img src="imagens/vandalismo.jpg" class="d-block w-100" alt="...">
                  <div class="carousel-caption d-block">
                      <h1>Resposta Rápida</h1>
                      <p>Resposta rápida com apoio de tecnologias de monitorização</p>
                      <a href="#monitorização" class="btn btn-success">Saber Mais</a>
                  </div>
              </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Anterior</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Seguinte</span>
          </button>
      </div>
  </header>

  <section class="py-5 text-center bg-light-green">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-3" data-aos="fade-up">
          <div class="p-4 bg-white rounded shadow-sm">
            <div id="counter-relatadas" class="counter">0</div>
            <p>Ocorrências Relatadas</p>
          </div>
        </div>
        <div class="col-md-3" data-aos="fade-up" data-aos-delay="100">
          <div class="p-4 bg-white rounded shadow-sm">
            <div id="counter-resolvidas" class="counter">0</div>
            <p>Fiscalizações Resolvidas</p>
          </div>
        </div>
        <div class="col-md-3" data-aos="fade-up" data-aos-delay="200">
          <div class="p-4 bg-white rounded shadow-sm">
            <div id="counter-analise" class="counter">0</div>
            <p>Ocorrências em Análise</p>
          </div>
        </div>
        <div class="col-md-3" data-aos="fade-up" data-aos-delay="300">
          <div class="p-4 bg-white rounded shadow-sm">
            <div id="counter-tempo" class="counter">0</div>
            <p>Tempo Médio de Resposta </p>
          </div>
        </div>
      </div>
    </div>
  </section>
    

  <section id="areas" class="py-5">
      <div class="container">
          <h2 class="section-title text-center mb-4">Áreas de Atuação</h2>
          <div class="row g-4">
              <div class="col-md-4" data-aos="zoom-in">
                  <div class="card">
                      <img src="imagens/limpeza.jpeg" class="card-img-top" alt="...">
                      <div class="card-body text-center">
                          <h5 class="card-title">Limpeza Urbana</h5>
                          <p class="card-text">Manutenção e remoção de resíduos em áreas públicas.</p>
                      </div>
                  </div>
              </div>
              <div class="col-md-4" data-aos="zoom-in" data-aos-delay="200">
                  <div class="card">
                      <img src="imagens/vandalismo.jpg" class="card-img-top" alt="...">
                      <div class="card-body text-center">
                          <h5 class="card-title">Vandalismo e Degradação</h5>
                          <p class="card-text">Resolução de atos de vandalismo em espaços urbanos.</p>
                      </div>
                  </div>
              </div>
              <div class="col-md-4" data-aos="zoom-in" data-aos-delay="400">
                  <div class="card">
                      <img src="imagens/higiene.jpg" class="card-img-top" alt="...">
                      <div class="card-body text-center">
                          <h5 class="card-title">Higiene e Segurança</h5>
                          <p class="card-text">Soluções de limpeza para espaços públicos e comerciais.</p>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </section>

  <section id="sobre" class="py-5" style="background-color: #d4edda;">
      <div class="container">
          <div class="row align-items-center">
              <div class="col-md-6" data-aos="fade-right">
                  <img src="imagens/serv.jpeg" alt="Equipe de Trabalho" class="img-fluid rounded">
              </div>
              <div class="col-md-6" data-aos="fade-left">
                  <h2 class="section-title">Sobre Nós</h2>
                  <p class="sobre">A EyesEverywhere é uma plataforma digital dedicada à Higiene e Segurança Urbana, com foco no registo, monitorização e resolução de ocorrências em espaços públicos e comerciais.</p>
                  <p class="sobre">Nosso objetivo é melhorar a qualidade de vida urbana, garantindo a limpeza, conservação e segurança dos ambientes por meio de uma plataforma acessível e intuitiva.</p>
              </div>
          </div>
      </div>
  </section>

  <section id="registo-ocorrencia" class="py-5 text-center" style="background-color: #28a7451a;">
    <div class="container" data-aos="zoom-in">
      <div class="row align-items-center">
        <div class="col-md-6">
          <h2 class="section-title mb-3 text-success">Notou algo errado na sua cidade?</h2>
          <p class="lead1 mb-4">Ajude-nos a transformar o seu bairro! Registe ocorrências em segundos e contribua para uma cidade mais limpa, segura e moderna.</p>
          <a href="registoocorrencia.html" class="btn btn-success btn-lg vibrate">
            <i class="fas fa-exclamation-circle me-2"></i> Registar Ocorrência
          </a>
        </div>
        <div class="col-md-6 mb-4 mb-md-0">
          <img src="Imagens/limpa.jpg" 
               alt="Cidadãos a colaborar com a limpeza urbana" 
               class="img-fluid rounded shadow-sm" style="max-height: 380px; object-fit: cover;">
        </div>
      </div>
    </div>
  </section>
  
  <section id="monitorização" class="py-5">
    <div class="container">
      <h2 class="section-title text-center mb-4">Tecnologias de Motorização</h2>
      <div class="row g-4">
        
        <div class="col-md-4 text-center" data-aos="zoom-in">
          <div class="p-4 bg-white rounded shadow-sm h-100">
            <i class="ph ph-warning-circle text-success" style="font-size: 64px;"></i>
            <h5 class="mt-3">App de Ocorrências</h5>
            <p class="card-text">Permite aos utilizadores reportar ocorrências de forma rápida e eficiente.</p>
          </div>
        </div>
        
        <div class="col-md-4 text-center" data-aos="zoom-in" data-aos-delay="200">
          <div class="p-4 bg-white rounded shadow-sm h-100">
            <i class="ph ph-chart-line-up text-success" style="font-size: 64px;"></i>
            <h5 class="mt-3">Análise em Tempo Real</h5>
            <p class="card-text">Monitorização contínua de dados para respostas imediatas.</p>
          </div>
        </div>
        
        <div class="col-md-4 text-center" data-aos="zoom-in" data-aos-delay="400">
          <div class="p-4 bg-white rounded shadow-sm h-100">
            <i class="ph ph-chart-pie-slice text-success" style="font-size: 64px;"></i>
            <h5 class="mt-3">Dashboard de Ocorrências</h5>
            <p class="card-text">Visualização intuitiva das ocorrências com métricas úteis.</p>
          </div>
        </div>
  
      </div>
    </div>
  </section>
  
<section id="cta" class="py-5 text-center bg-light-green" data-aos="zoom-in">
  <div class="container">
    <h2 class="mb-4 section-title" data-aos="fade-up" data-aos-delay="100">
      Transforme a sua cidade com a EyesEverywhere
    </h2>
    <p class="lead mb-4" data-aos="fade-up" data-aos-delay="200">
      Atualize auditorias, melhore a segurança urbana e contribua para espaços públicos mais limpos e seguros — tudo com apenas alguns toques.
    </p>
    <a href="https://example.com/app" class="btn btn-success btn-lg" data-aos="fade-up" data-aos-delay="300">
      Aceder à Aplicação
    </a>
  </div>
</section>

<!-- Modal -->
<div class="modal fade" id="ajudaModal" tabindex="-1" aria-labelledby="ajudaModalLabel" aria-hidden="true">
<div class="modal-dialog modal-lg modal-dialog-scrollable">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="ajudaModalLabel">Ajuda</h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
    </div>
    <div class="modal-body">
      <!-- Aqui entra o conteúdo da imagem (FAQ) -->
      <h3>Possíveis perguntas básicas</h3>
      <p>Uma lista com as dúvidas mais comuns dos utilizadores, como:</p>
      <h5>✔ Como registar uma ocorrência?</h5>
      <ol>
        <li>Acesse a plataforma e faça login na sua conta.</li>
        <li>No painel inicial, localize o formulário de submissão de ocorrência.</li>
        <li>Preencha os campos obrigatórios, incluindo:
          <ul>
            <li>Nome da Empresa;</li>
            <li>Nome da Ocorrência;</li>
            <li>Descrição detalhada do problema;</li>
            <li>Localização e Código Postal.</li>
          </ul>
        </li>
        <li>Defina o nível de gravidade da ocorrência de 1 a 5.</li>
        <li>Anexe imagens ou vídeos que ajudem a identificar a situação.</li>
        <li>Clique em "Submeter".</li>
      </ol>

      <h5>✔ Quem pode visualizar e atuar nas ocorrências?</h5>
      <ul>
        <li>Os cidadãos podem visualizar apenas as suas próprias ocorrências.</li>
        <li>A equipa de auditoria tem acesso total às ocorrências.</li>
        <li>As autoridades locais e técnicos municipais também têm permissões.</li>
        <li>As equipas de limpeza intervêm diretamente nos problemas reportados.</li>
      </ul>

      <h5>✔ O que acontece depois de reportar um problema?</h5>
      <ol>
        <li>Análise Inicial – Verificação da veracidade e urgência do problema.</li>
        <li>Aprovação/Rejeição – O utilizador é informado se a ocorrência for rejeitada.</li>
        <li>Atribuição – Técnicos são notificados e iniciam a resolução.</li>
        <li>Execução da Tarefa – A equipa designada resolve o problema.</li>
        <li>Conclusão e Feedback – O estado muda para "Resolvida", com resumo da intervenção.</li>
      </ol>
    </div>
  </div>
</div>
</div>


  <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-6 text-center text-md-start mb-4 mb-md-0">
            <h4>Entre em Contato</h4>
            <p><strong>Telefone:</strong> +351 911 456 789</p>
            <p><strong>Email:</strong> eyeseverywhere@gmail.com</p>
            <p><strong>Endereço:</strong> Rua da Universidade, 123, Guimarães</p>
          </div>
          <div class="col-md-6">
            <h4 class="text-center text-md-start">Sugestões</h4>
            <form class="suggestion-form">
              <div class="mb-2">
                <input type="text" class="form-control" id="nome" placeholder="Nome" required>
              </div>
              <div class="mb-2">
                <textarea class="form-control" id="sugestao" rows="3" placeholder="Escreva a sua sugestão..." required></textarea>
              </div>
              <div class="text-end">
                <button type="submit" class="btn btn-light btn-sm">Enviar</button>
              </div>
              <div id="mensagem" style="display: none; margin-top: 10px;"></div>
            </form>
          </div>
        </div>
      </div>
    </footer>
    <!-- Botão de abrir chat -->
<button id="chatSimulado" class="btn btn-success rounded-circle shadow" title="Ajuda" style="position: fixed; bottom: 100px; right: 30px; z-index: 1050;">
  <i class="fas fa-robot"></i>
</button>

<!-- Janela de chat -->
<div id="chatWindow" class="shadow" style="display: none; position: fixed; bottom: 160px; right: 30px; width: 300px; background: white; border-radius: 12px; overflow: hidden; z-index: 1051;">
  <div style="background: #28a745; color: white; padding: 10px; font-weight: bold;">
    👋 Assistente Virtual
    <span style="float: right; cursor: pointer;" onclick="fecharChat()">✖</span>
  </div>
  <div id="chatBody" style="max-height: 300px; overflow-y: auto; padding: 10px; font-size: 0.9rem;">
    <p><strong>Bot:</strong> Olá! Como posso ajudar?</p>
    <button class="btn btn-outline-success btn-sm w-100 my-1" onclick="responder('Como registar uma ocorrência?')">Como registar uma ocorrência?</button>
    <button class="btn btn-outline-success btn-sm w-100 my-1" onclick="responder('Quem resolve os problemas?')">Quem resolve os problemas?</button>
    <button class="btn btn-outline-success btn-sm w-100 my-1" onclick="responder('Como consultar as ocorrências todas?')">Como consultar as ocorrências todas?</button>
    <button class="btn btn-outline-success btn-sm w-100 my-1" onclick="responder('Como validar ocorrências?')">Como validar ocorrências?</button>
  </div>
</div>

  
    <!-- Botão Scroll Top -->
     <!-- Notificação -->
<div class="notification" id="suggestionNotification">
  Obrigado pela sua sugestão!
</div>
</div>
<!-- Botão Scroll Top -->
<button id="scrollTopBtn" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
  <i class="fas fa-arrow-up"></i>
</button>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  const chatBtn = document.getElementById("chatSimulado");
  const chatWindow = document.getElementById("chatWindow");
  const chatBody = document.getElementById("chatBody");

  chatBtn.addEventListener("click", () => {
    chatWindow.style.display = chatWindow.style.display === "none" ? "block" : "none";
  });

  function fecharChat() {
    chatWindow.style.display = "none";
  }

  function responder(pergunta) {
    const userMsg = `<p><strong>Tu:</strong> ${pergunta}</p>`;
    chatBody.innerHTML += userMsg;

    let resposta = "";
    switch (pergunta) {
      case "Como registar uma ocorrência?":
        resposta = "Acede à tua conta, clica em 'Registar Ocorrência', preenche os dados e submete.";
        break;
      case "Quem resolve os problemas?":
        resposta = "As equipas de limpeza, peritos, técnicos municipais e autoridades locais atuam nas ocorrências.";
        break;
      case "Como consultar as ocorrências todas?":
        resposta = "Vai à tabela onde podes consultar as tuas ocorrências e as registadas por outros utilizadores.";
        break;
      case "Como validar ocorrências?":
        resposta = "Vai ao mapa e terás todas as ocorrências no estado 'inicial', onde poderás verificar se existem ou não.";
        break;
      default:
        resposta = "Desculpa, ainda estou a aprender isso!";
    }


    setTimeout(() => {
      chatBody.innerHTML += `<p><strong>Bot:</strong> ${resposta}</p>`;
      chatBody.scrollTop = chatBody.scrollHeight;
    }, 500);
  }
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const form = document.querySelector('.suggestion-form');

    if (!form) {
        console.error("Formulário não encontrado.");
        return;
    }

    form.addEventListener('submit', function(e) {
        e.preventDefault();

        const nome = document.getElementById('nome')?.value;
        const texto = document.getElementById('sugestao')?.value;  // Renomeado para texto

        // Buscar dados do utilizador autenticado
        const usuario = JSON.parse(sessionStorage.getItem('usuario'));

        if (!usuario || !usuario.email) {
            alert("Erro: Nenhum utilizador autenticado.");
            return;
        }

        const hoje = new Date();
        const dataFormatada = hoje.toLocaleDateString('pt-PT'); // DD/MM/YYYY

        const sugestaoData = {
            nome,
            email: usuario.email,   // Email do sessionStorage
            texto,                  // O campo agora chama texto
            data: dataFormatada,    // Formato DD/MM/YYYY
            tipo: 'utilizador'
        };

        // Obter sugestões existentes
        let sugestoes = JSON.parse(localStorage.getItem('sugestoes')) || [];

        // Adicionar nova sugestão
        sugestoes.push(sugestaoData);

        // Guardar no localStorage
        localStorage.setItem('sugestoes', JSON.stringify(sugestoes));

        form.reset();
        alert('Sugestão guardada com sucesso!');
    });
});
</script>


  <script>
    AOS.init();

    const scrollBtn = document.getElementById("scrollTopBtn");
    window.addEventListener("scroll", () => {
      scrollBtn.style.display = window.scrollY > 200 ? "block" : "none";
    });

    document.addEventListener("DOMContentLoaded", () => {
        const counters = document.querySelectorAll(".counter");
        counters.forEach(counter => {
            const updateCount = () => {
                const target = +counter.innerText;
                let count = 0;

                // Reduz o step para tornar a animação mais lenta e suave
                const step = Math.max(1, Math.ceil(target / 10000)); // Aumentar divisor = mais lento

                const animate = () => {
                    count += step;
                    if (count < target) {
                        counter.innerText = count;
                        setTimeout(animate, 400); // Aumenta o tempo de atraso = mais lento
                    } else {
                        counter.innerText = target;
                    }
                };

                // Começa animação
                counter.innerText = "0"; // Garantir que começa do zero
                animate();
            };

            updateCount();
        });
    });


    const darkToggle = document.getElementById("darkModeToggle");
    darkToggle.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");
    });

    function showNotification(e) {
      e.preventDefault();
      const notification = document.getElementById("suggestionNotification");
      notification.style.display = "block";
      setTimeout(() => {
        notification.style.display = "none";
      }, 3000);
    }
    // Lê as ocorrências do localStorage
    const stored = localStorage.getItem('ocorrencias');
    let ocorrencias = [];
  
    try {
      ocorrencias = stored ? JSON.parse(stored) : [];
    } catch (e) {
      console.error("Erro a ler 'ocorrencias' do localStorage:", e);
    }
  
    // Contadores
    const totalRelatadas = ocorrencias.length;
    const totalResolvidas = ocorrencias.filter(o => o.estado?.toLowerCase() === "finalizada").length;
    const totalAnalise = ocorrencias.filter(o =>
      ["inicial", "em análise"].includes(o.estado?.toLowerCase())
    ).length;
  
    // Tempo médio de resposta
    const hoje = new Date();
    const resolvidas = ocorrencias.filter(o => o.estado?.toLowerCase() === "finalizada");
    let totalDias = 0;
  
    resolvidas.forEach(o => {
      const dataOcorrencia = new Date(o.dataHora);
      const dias = (hoje - dataOcorrencia) / (1000 * 60 * 60 * 24);
      totalDias += dias;
    });
  
    const tempoMedio = resolvidas.length > 0 ? Math.round(totalDias / resolvidas.length) : 0;
  
    // Atualiza os elementos do DOM
    document.getElementById('counter-relatadas').textContent = totalRelatadas;
    document.getElementById('counter-resolvidas').textContent = totalResolvidas;
    document.getElementById('counter-analise').textContent = totalAnalise;
    document.getElementById('counter-tempo').textContent = tempoMedio;
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>